/*
Yetii - Yet (E)Another Tab Interface Implementation
version 1.9.0
https://github.com/shrglobal/yetti
Copyright (c) Grzegorz Wojcik, Sceptre Hospitality Resources
Code licensed under the BSD License:
https://raw.githubusercontent.com/shrglobal/yetti/master/LICENSE
*/
function Yetii(){this.defaults={id:null,active:1,interval:null,wait:null,persist:null,tabclass:"tab",activeclass:"active",callback:null,leavecallback:null};this.activebackup=null;for(var t in arguments[0]){this.defaults[t]=arguments[0][t]}this.getTabs=function(){var t=[];var e=document.getElementById(this.defaults.id).getElementsByTagName("*");var s=new RegExp("(^|\\s)"+this.defaults.tabclass.replace(/\-/g,"\\-")+"(\\s|$)");for(var i=0;i<e.length;i++){if(s.test(e[i].className))t.push(e[i])}return t};this.links=document.getElementById(this.defaults.id+"-nav").getElementsByTagName("a");this.listitems=document.getElementById(this.defaults.id+"-nav").getElementsByTagName("li");this.applyRoles=function(){document.getElementById(this.defaults.id+"-nav").setAttribute("role","tablist");for(var t=0;t<this.tabs.length;t++){this.listitems[t].setAttribute("role","tab");this.tabs[t].setAttribute("role","tabpanel");this.tabs[t].setAttribute("tabindex",0);var e=this.listitems[t].getAttribute("id");if(e&&e.length>0)this.tabs[t].setAttribute("aria-labelledby",e)}};this.show=function(t){for(var e=0;e<this.tabs.length;e++){if(e+1===t){this.tabs[e].style.display="block";this.tabs[e].removeAttribute("hidden");this.addClass(this.links[e],this.defaults.activeclass);this.addClass(this.listitems[e],this.defaults.activeclass+"li");this.links[e].setAttribute("tabindex",0);this.listitems[e].setAttribute("tabindex",0);this.listitems[e].setAttribute("aria-selected",true)}else{this.tabs[e].style.display="none";this.tabs[e].setAttribute("hidden",true);this.removeClass(this.links[e],this.defaults.activeclass);this.removeClass(this.listitems[e],this.defaults.activeclass+"li");this.links[e].setAttribute("tabindex",-1);this.listitems[e].setAttribute("tabindex",-1);this.listitems[e].setAttribute("aria-selected",false)}}if(this.defaults.leavecallback&&t!=this.activebackup)this.defaults.leavecallback(this.defaults.active);this.activebackup=t;this.defaults.active=t;if(this.defaults.callback)this.defaults.callback(t)};this.rotate=function(t){this.show(this.defaults.active);this.defaults.active++;if(this.defaults.active>this.tabs.length)this.defaults.active=1;var e=this;if(this.defaults.wait)clearTimeout(this.timer2);this.timer1=setTimeout(function(){e.rotate(t)},t*1e3)};this.next=function(){var t=this.defaults.active+1>this.tabs.length?1:this.defaults.active+1;this.show(t);this.defaults.active=t};this.previous=function(){var t=this.defaults.active-1==0?this.tabs.length:this.defaults.active-1;this.show(t);this.defaults.active=t};this.previous=function(){this.defaults.active--;if(!this.defaults.active)this.defaults.active=this.tabs.length;this.show(this.defaults.active)};this.gup=function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e="[\\?&]"+t+"=([^&#]*)";var s=new RegExp(e);var i=s.exec(window.location.href);if(i==null)return null;else return i[1]};this.guh=function(){var t="#([^&#]*)";var e=new RegExp(t);var s=e.exec(window.location.hash);if(s==null)return null;else return s[1]};this.parseurl=function(t){var e=this.gup(t);if(e==null)e=this.guh();if(e==null)return null;if(parseInt(e))return parseInt(e);if(document.getElementById(e)){for(var s=0;s<this.tabs.length;s++){if(this.tabs[s].id==e){return s+1}}}return null};this.createCookie=function(t,e,s){if(s){var i=new Date;i.setTime(i.getTime()+s*24*60*60*1e3);var a="; expires="+i.toGMTString()}else var a="";document.cookie=t+"="+e+a+"; path=/"};this.readCookie=function(t){var e=t+"=";var s=document.cookie.split(";");for(var i=0;i<s.length;i++){var a=s[i];while(a.charAt(0)==" ")a=a.substring(1,a.length);if(a.indexOf(e)==0)return a.substring(e.length,a.length)}return null};this.hasClass=function(t,e){var s=t.className.split(" ");for(var i=0;i<s.length;i++){if(s[i]==e)return true}return false};this.addClass=function(t,e){if(!this.hasClass(t,e))t.className=(t.className+" "+e).replace(/\s{2,}/g," ").replace(/^\s+|\s+$/g,"")};this.removeClass=function(t,e){t.className=t.className.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)"),"$1");t.className.replace(/\s{2,}/g," ").replace(/^\s+|\s+$/g,"")};this.tabs=this.getTabs();this.defaults.active=this.parseurl(this.defaults.id)?this.parseurl(this.defaults.id):this.defaults.active;if(this.defaults.persist&&this.readCookie(this.defaults.id))this.defaults.active=this.readCookie(this.defaults.id);this.activebackup=this.defaults.active;this.applyRoles();this.show(this.defaults.active);var e=this;for(var s=0;s<this.links.length;s++){this.links[s].customindex=s+1;this.links[s].onclick=function(){if(e.timer1)clearTimeout(e.timer1);if(e.timer2)clearTimeout(e.timer2);e.show(this.customindex);if(e.defaults.persist)e.createCookie(e.defaults.id,this.customindex,0);if(e.defaults.wait)e.timer2=setTimeout(function(){e.rotate(e.defaults.interval)},e.defaults.wait*1e3);return false}}if(this.defaults.interval)this.rotate(this.defaults.interval)}
